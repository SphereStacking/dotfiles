# 承認済み実装計画の実行

`.SphereStacking/plan/` ディレクトリにある承認済みの実装計画を実行します。

## 前提条件チェック

**何かをする前に、必ず計画が承認されているか確認：**

1. 最新の計画ファイルを探す：
```bash
ls .SphereStackingplan/ | grep -E '^[0-9]{8}_[0-9]+-' | sort -r | head -1
```

2. 計画を読んで **ステータス** フィールドを確認

3. ステータスが `承認` でなければ **即座に停止**

## 拒否時の応答

計画のステータスが `承認` でない場合、以下のように応答：

```
⚠️ 実装を開始できません。

**理由**: 計画のステータスは「[現在のステータス]」です。「承認」ではありません。

**次のステップ**:
1. `/plan` で計画を作成または更新
2. 計画をレビュー
3. 承認する場合はステータスを「承認」に変更
4. その後 `/implement` を再実行
```

**絶対に実装を進めないこと。**

## 計画が承認済み（承認）の場合

タスクを順番に実行：

### 各タスクについて：

1. 計画ファイルでステータスを 🟡（進行中）に更新
2. タスクを実装
3. 該当する場合はテストを実行
4. ステータスを 🟢（完了）に更新
5. 実績時間を記録
6. 次のタスクへ移動

### 計画ファイルの更新

各タスク完了後：
```markdown
#### タスク1.1: [タスク名]
- **ステータス**: 🟢
- **実績**: 1.5h
```

## 完了チェックリスト

全タスク完了時：

1. 全ての受入条件が満たされているか確認
2. 完全なテストスイートを実行：
```bash
npm run lint
npm run typecheck
npm test
```

3. 計画ステータスを更新：
```markdown
## 計画ステータス
- **ステータス**: 実装完了

## 計画ステータス: 🟢 完了
```

4. 必要に応じてコミットを整理

## エラー処理

### テスト失敗時
- 先に進む前に修正
- 設計変更が必要な場合は計画を更新

### タスクがブロックされた場合
- 計画で 🔴 としてマーク
- メモセクションにブロッカーを記録
- ユーザーにガイダンスを求める

### スコープ変更が必要な場合
- 実装を停止
- 新しい要件で計画を更新
- 再承認を得る（ステータスを再度「承認」に）
- その後続行

## 重要なルール

1. **承認チェックを絶対にスキップしない**
2. **タスクは順番に実行** - スキップや並び替えはしない
3. **計画をリアルタイムで更新** - ステータス、実績時間、メモ
