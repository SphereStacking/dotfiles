# 実装計画の作成

新機能や改善のための構造化された実装計画を作成します。

## 手順

1. まず、今日の日付と連番を確認：
```bash
# 今日の計画ファイルを確認して次の連番を決定
today=$(date +%Y%m%d)
ls .SphereStacking/plan/ | grep -E "^${today}_[0-9]+-" | sort -t'_' -k2 -n | tail -3
```

2. `.SphereStacking/plan/yyyymmdd_N-機能名.md` に新しい計画ファイルを作成
   - 例: `.SphereStacking/plan/20241224_1-user-auth.md`
   - 同日に複数作成する場合は連番を増やす: `20241224_2-api-refactor.md`

3. **重要**: 計画のステータスが `承認` に変更されるまで、絶対に実装を開始しないこと

4. 計画作成後、ユーザーに提示してレビューと承認を待つ

## 計画テンプレート

以下のテンプレートを使用：

```markdown
# [機能名]

## 計画ステータス

**重要**: ステータスが「承認」の場合のみ実装を開始すること

- **ステータス**: プランニング中

## 概要
- **目的**: [このフェーズで達成すること]
- **前提条件**: [必要な前フェーズ]
- **参照ドキュメント**:
  - 主要: [ドキュメント名](パス)
- **計画ステータス**: ⚪ 未着手

## タスクリスト

### セクション1: [セクション名]

#### タスク1.1: [タスク名]
- **詳細**: [具体的な作業内容]
- **仕様参照**: [セクション](ドキュメントパス#セクション)
- **見積**: Xh
- **実績**: -
- **ステータス**: ⚪
- **成果物**:
  - `path/to/file.ts`

## 成果物一覧
- [作成・変更するファイル/ディレクトリのリスト]

## 受入条件
- [ ] [具体的な確認項目1]
- [ ] [具体的な確認項目2]
- [ ] [具体的な確認項目3]

## PRチェックリスト

### コード品質
- [ ] `npm run lint` が通る
- [ ] `npm run typecheck` が通る
- [ ] `npm test` が通る

### i18n対応（該当する場合）
- [ ] ハードコードされた文字列がない
- [ ] `translations` キーを使用（`i18n` ではない）
- [ ] 日本語・英語の両方を追加

### コミット整理
- [ ] 意味のある単位でコミットが分かれている
- [ ] 不要なfixupコミットがまとめられている

## 依存関係
- **前提**: [前提となる計画]
- **ブロッカー**: なし

## メモ
- [重要な考慮事項]
```

## ステータスアイコン

| アイコン | 意味 |
|---------|------|
| ⚪ | 未着手 |
| 🟡 | 進行中 |
| 🟢 | 完了 |
| 🔴 | ブロック |

## ステータス値

| ステータス | 意味 |
|-----------|------|
| プランニング中 | 計画作成中 - 実装不可 |
| 承認 | 承認済み - /implement で実装可能 |
| 却下 | 却下 - 修正が必要 |
| ペンディング | 保留中 - 判断待ち |

## ガイドライン

1. **小さなタスク**: 1〜4時間単位に分割
2. **明確な成果物**: 正確なファイルパスを指定
3. **テストファースト**: テスト計画を含める
4. **アーキテクチャ**: Clean Architectureの層を考慮

## 計画作成後

1. ユーザーに計画を提示
2. レビューとフィードバックを求める
3. ユーザーがステータスを `承認` に変更するのを待つ
4. その後のみ `/implement` を使用可能
